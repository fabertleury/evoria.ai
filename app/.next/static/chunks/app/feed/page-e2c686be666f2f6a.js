(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[826],{8510:function(e,t,s){Promise.resolve().then(s.bind(s,7378))},7378:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return r}});var n=s(7437),a=s(2265),c=s(1180),i=s(3102),d=s(7135);function r(){let[e,t]=(0,a.useState)(""),[s,r]=(0,a.useState)([]),l=async e=>{let t=await fetch("".concat("http://localhost:8000/api","/feed/posts?eventId=").concat(encodeURIComponent(e)));r((await t.json()).posts||[])};return(0,a.useEffect)(()=>{if(!e)return;l(e);let t=c.O.channel("feed_".concat(e)).on("postgres_changes",{event:"INSERT",schema:"public",table:"posts",filter:"event_id=eq.".concat(e)},e=>{let t=e.new;r(e=>[{id:t.id,eventId:t.event_id,guestId:t.guest_id,content:t.content,mediaId:t.media_id,likes:t.likes,createdAt:t.created_at},...e])}).subscribe();return()=>{c.O.removeChannel(t)}},[e]),(0,n.jsxs)("main",{className:"p-8 space-y-6 max-w-2xl mx-auto",children:[(0,n.jsx)("h2",{className:"text-2xl font-semibold",children:"Feed do Evento"}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(d._,{children:"Evento"}),(0,n.jsx)(i.I,{value:e,onChange:e=>t(e.target.value),placeholder:"eventId"})]}),(0,n.jsxs)("div",{className:"space-y-4",children:[s.map(e=>(0,n.jsxs)("div",{className:"border rounded p-3",children:[(0,n.jsx)("div",{className:"text-sm text-gray-500",children:new Date(e.createdAt).toLocaleString()}),e.content&&(0,n.jsx)("div",{className:"mt-2",children:e.content}),e.mediaId&&(0,n.jsxs)("div",{className:"mt-2 text-sm",children:["M\xeddia #",e.mediaId]}),(0,n.jsxs)("div",{className:"mt-2 text-sm",children:["Likes: ",e.likes]})]},e.id)),!s.length&&(0,n.jsx)("div",{className:"text-sm text-gray-500",children:"Sem posts ainda."})]})]})}},3102:function(e,t,s){"use strict";s.d(t,{I:function(){return a}});var n=s(7437);function a(e){let{className:t="",...s}=e;return(0,n.jsx)("input",{className:"w-full border rounded px-3 py-2 ".concat(t),...s})}},7135:function(e,t,s){"use strict";s.d(t,{_:function(){return a}});var n=s(7437);function a(e){let{className:t="",...s}=e;return(0,n.jsx)("label",{className:"text-sm font-medium ".concat(t),...s})}},1180:function(e,t,s){"use strict";s.d(t,{O:function(){return n}});let n=(0,s(4593).eI)("https://jrwzpkavlaxcweodumak.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Impyd3pwa2F2bGF4Y3dlb2R1bWFrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjMwNDE1NzUsImV4cCI6MjA3ODYxNzU3NX0.vYt_DMqqU7dTI2Ad-Crv0AVstspSZjwqjFqE3sg8seo")}},function(e){e.O(0,[593,971,23,744],function(){return e(e.s=8510)}),_N_E=e.O()}]);